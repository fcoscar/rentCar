{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.matchRemotePattern = matchRemotePattern;\nexports.hasMatch = hasMatch;\n\nvar _micromatch = require(\"next/dist/compiled/micromatch\");\n\nfunction matchRemotePattern(pattern, url) {\n  if (pattern.protocol !== undefined) {\n    const actualProto = url.protocol.slice(0, -1);\n\n    if (pattern.protocol !== actualProto) {\n      return false;\n    }\n  }\n\n  if (pattern.port !== undefined) {\n    if (pattern.port !== url.port) {\n      return false;\n    }\n  }\n\n  if (pattern.hostname === undefined) {\n    throw new Error(`Pattern should define hostname but found\\n${JSON.stringify(pattern)}`);\n  } else {\n    if (!(0, _micromatch).makeRe(pattern.hostname).test(url.hostname)) {\n      return false;\n    }\n  }\n\n  var _pathname;\n\n  if (!(0, _micromatch).makeRe((_pathname = pattern.pathname) != null ? _pathname : '**').test(url.pathname)) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction hasMatch(domains, remotePatterns, url) {\n  return domains.some(domain => url.hostname === domain) || remotePatterns.some(p => matchRemotePattern(p, url));\n}","map":{"version":3,"mappings":"AAAA;;;;;QAGgBA;QA8BAC;;AAhCO,eAA+B,WAA/B,+BAA+B,CAA/B;;AAEhB,SAASD,kBAAT,CAA4BE,OAA5B,EAAoDC,GAApD,EAAuE;EAC5E,IAAID,OAAO,CAACE,QAARF,KAAqBG,SAAzB,EAAoC;IAClC,MAAMC,WAAW,GAAGH,GAAG,CAACC,QAAJD,CAAaI,KAAbJ,CAAmB,CAAnBA,EAAsB,CAAC,CAAvBA,CAApB;;IACA,IAAID,OAAO,CAACE,QAARF,KAAqBI,WAAzB,EAAsC;MACpC,OAAO,KAAP;IACD;EACF;;EACD,IAAIJ,OAAO,CAACM,IAARN,KAAiBG,SAArB,EAAgC;IAC9B,IAAIH,OAAO,CAACM,IAARN,KAAiBC,GAAG,CAACK,IAAzB,EAA+B;MAC7B,OAAO,KAAP;IACD;EACF;;EAED,IAAIN,OAAO,CAACO,QAARP,KAAqBG,SAAzB,EAAoC;IAClC,MAAM,IAAIK,KAAJ,CACH,6CAA4CC,IAAI,CAACC,SAALD,CAAeT,OAAfS,CAAwB,EADjE,CAAN;EAGD,CAJD,MAIO;IACL,IAAI,CAACE,iBAAwBA,MAAxBA,CAAOX,OAAO,CAACO,QAAfI,EAAyBC,IAAzBD,CAA8BV,GAAG,CAACM,QAAlCI,CAAL,EAAkD;MAChD,OAAO,KAAP;IACD;EACF;;MAEWX;;EAAZ,IAAI,CAACW,iBAAgCA,MAAhCA,CAAOX,UAAgB,GAAhBA,OAAO,CAACa,QAARb,KAAgB,IAAhBA,eAAoB,IAA3BW,EAAiCC,IAAjCD,CAAsCV,GAAG,CAACY,QAA1CF,CAAL,EAA0D;IACxD,OAAO,KAAP;EACD;;EAED,OAAO,IAAP;AACD;;AAEM,SAASZ,QAAT,CACLe,OADK,EAELC,cAFK,EAGLd,GAHK,EAII;EACT,OACEa,OAAO,CAACE,IAARF,CAAcG,MAAD,IAAYhB,GAAG,CAACM,QAAJN,KAAiBgB,MAA1CH,KACAC,cAAc,CAACC,IAAfD,CAAqBG,CAAD,IAAOpB,kBAAkB,CAACoB,CAAD,EAAIjB,GAAJ,CAA7Cc,CAFF;AAID","names":["matchRemotePattern","hasMatch","pattern","url","protocol","undefined","actualProto","slice","port","hostname","Error","JSON","stringify","makeRe","test","pathname","domains","remotePatterns","some","domain","p"],"sources":["../../../shared/lib/match-remote-pattern.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}